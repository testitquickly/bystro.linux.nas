Content-Type: text/x-zim-wiki
Wiki-Format: zim 0.6
Creation-Date: 2023-01-31T14:46:23+02:00

====== Настроить доступ к NAS по hostname ======

===== Включить обращение к серверу по hostname =====

Удобнее обращаться к NAS не по IP (''192.168.1.20''), а по hostname вроде “''tower.local''”.

Надо последовательно настроить всё
* на стороне OMV,
* на ноуте (редактирование файла /etc/hosts),
* на стороне роутера — тогда всё будет работать и на смартфонах.

==== Настройка внутри OMV ====

''Network''
''> General''

* Hostname = например, „tower” — должно было быть настроено на этапе установки системы.
* Domain name = например, стандартное „local” — должно было быть настроено на этапе установки системы.
* [Save / Apply / Yes]

==== Настройка /etc/hosts ====

На своём ноуте

''sudo mcedit /etc/hosts''

	Под виндой надо сперва открыть блокнот от имени администратора, затем открыть файл ''c:\windows\system32\drivers\etc\hosts''

Добавить туда новую строку:

''192.168.1.20 tower.local''

Отныне с ноута все сетевые обращения с данного ноута к “''tower.local”'' будут перенаправляться на IP ''192.168.1.20''

==== Настройка DNS роутера ====

К роутерам заходят через внутреннюю сеть из браузера. Служебные адреса прописаны на самих роутерах.

В настройках роутера надо пройти в раздел настройки DHCP-сервера, найти свой сервер NAS по mac-адресу и в таблице резервирования адресов прописать для сервера удобный (самому себе) IP вроде ''192.168.90.10'' — нумерация полностью зависит от заданного пула IP-адресов. Или сохранить существующий.

===== Подключение через браузер =====

* Открыть в браузере “''http://tower.local:81''” (внимание — http, а не https!) 
* Залогиниться
	* или стандартным ''admin'' (пароль или стандартный “''openmediavault''” или новый, если/который он был задан на шаге [[Проверить доступ к OMV из браузера]] )
	* или под своим новым юзером.

===== Подключение через ssh в консоли =====

См. раздел [[SSH]] 

В консоли подключение к “''ssh root@tower.local''” (также через “''ssh root@tower.local:81''”, но это сработает только после редактирования ''/etc/hosts'' )

Затем надо сделать подключение по ssh в новом процессе — открыть новое окно с консолью и  выполнить подключение под root (“''ssh root@tower.local''”) или же под «своим» юзером.

Если не хочется переключаться в новое окно, можно в том же окне консоли сперва выполнить “''exec bash''” (It allows you to execute a command that completely replaces the current process), затем уже всё остальное.

При подключении к «новому» источнику будет предложен стандартный обмен ssh-ключами. 

Он будет предложен даже в том случае, если уже была создана связка приватный/публичный ssh-ключ для данного юзера и в его настройках в OMV уже был опубликован публичный ключ.

//Next step//: [[Проверить сетевой интерфейс]]
